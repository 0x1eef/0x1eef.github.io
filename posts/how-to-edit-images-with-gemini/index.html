<!DOCTYPE html>
<HTML lang="en">
<HEAD>
  <META name="generator" content=
  "HTML Tidy for HTML5 for FreeBSD version 5.8.0">
  <TITLE>@0x1eef's personal website</TITLE>
  <META charset="utf-8">
  <META name="viewport" content=
  "width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <LINK rel="icon" sizes="16x16" href="/images/favicon-16x16.png">
  <LINK rel="icon" sizes="32x32" href="/images/favicon-32x32.png">
  <LINK rel="icon" sizes="48x48" href="/images/favicon-48x48.png">
  <LINK rel="icon" sizes="64x64" href="/images/favicon-64x64.png">
  <LINK rel="icon" sizes="128x128" href="/images/favicon-128x128.png">
  <LINK rel="icon" sizes="256x256" href="/images/favicon-256x256.png">
  <LINK rel="stylesheet" href="/css/main.css">
  <SCRIPT src="/js/prism.js" async></SCRIPT>
  <LINK rel="stylesheet" href="/css/prism/github.css">
  <LINK rel="stylesheet" href="/css/prism/tomorrownight.css">
  <META property="og:type" content="article">
  <META property="og:title" content="How to edit images with Gemini">
  <META property="og:description" content=
  "Documents how to edit a photo with Gemini and llm.rb">
  <META property="og:url" content=
  "https://0x1eef.github.io/posts/how-to-edit-images-with-gemini">
  <META property="og:image" content="https://0x1eef.github.io/images/og.png">
  <META property="og:image:type" content="image/png">
  <META property="og:image:width" content="512">
  <META property="og:image:height" content="512">
</HEAD>
<BODY class="hidden">
  <HEADER class="main-header">
    <IMG src="/images/og.png" alt="Leaf Logo" class="nav-logo">
    <NAV>
      <UL>
        <LI>
          <A href="/">HOME</A>
        </LI>
        <LI>
          <A href="/posts">POSTS</A>
        </LI>
      </UL>
    </NAV><BUTTON id="theme-toggle" aria-label="Toggle dark mode"><SPAN class=
    "theme-icon-sun" aria-hidden="true">â˜€</SPAN> <SPAN class="theme-icon-moon"
    aria-hidden="true">ðŸŒ™</SPAN></BUTTON>
  </HEADER>
  <MAIN>
    <DIV>
    <H2>About</H2>
    <P>This post looks at how we can edit an image with Gemini and <A href=
    "https://github.com/llmrb/llm">llm.rb</A>. Our plan is to edit an image to
    be a little silly by adding a cowboy hat into the mix. The <A href=
    "https://github.com/llmrb/llm">llm.rb</A> library supports both image
    generation (with a prompt) and image editing (also done with a prompt) plus
    much more that we won't cover here. Let's get started ðŸ˜ƒ</P>
    <H2>Placeholder</H2>
    <P>We don't want to offend anybody or cross any red lines, so the first
    step we will take is to generate a placeholder image on the fly. This will
    allow us to follow up and edit the image by adding a cowboy hat as
    mentioned earlier. Let's generate a single image, and save it to use
    later:</P>
    <PRE><CODE class="language-ruby">#!/usr/bin/env ruby
require "llm"

llm = LLM.gemini(key: ENV["GEMINI_SECRET"])
res = llm.images.create(prompt: "A profile photo of a man, in his late 30s")
IO.copy_stream res.images[0], "photo.png"
</CODE></PRE>
    <H2>Edit</H2>
    <P>The next step in the process is to edit the image we generated in the
    last step. We will add a cowboy hat to the man in the photo, which will
    likely be different for each person running these examples. The
    <CODE>edit</CODE> method takes a path to a file, and also a prompt that
    describes the edit that should be made:</P>
    <PRE><CODE class="language-ruby">#!/usr/bin/env ruby
require "llm"

llm = LLM.gemini(key: ENV["GEMINI_SECRET"])
res = llm.images.edit(image: "photo.png", prompt: "Add a cowboy hat")
IO.copy_stream res.images[0], "cowboy.png"
</CODE></PRE>
    <H2>Result</H2><IMG alt="cowboy photo" src="cowboy.png"></DIV>
  </MAIN>
  <FOOTER>
    <P>This website was generated by <A href="https://go.dev/" target="_blank"
    rel="noopener noreferrer">Golang</A></P>
  </FOOTER>
  <SCRIPT src="/js/main.js"></SCRIPT>
</BODY>
</HTML>
